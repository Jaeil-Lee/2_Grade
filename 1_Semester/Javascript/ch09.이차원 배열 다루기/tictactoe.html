<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2ì°¨ì› ë°°ì—´ ë‹¤ë£¨ê¸°</title>
  <style>
    
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    table {
      border-collapse: collapse;
      margin: atuo 0;
    }
  
    td {
      border: 10px solid black;
      width: 150px;
      height: 150px;
      font-size: 80px;
      text-align: center;
    }
  </style>
</head>
<!-- ----------------------------------------------------- < TODO: body >----------------------------------------------------- -->
<body>

 <!-- <table>
    <tr>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </table> -->


<!-- -----------------------------------------------------<FIXME:script>----------------------------------------------------- -->
   <script>
    // const $td00 = document.querySelector('.#td00')
    // $td00.addEventListener('click',()=>{});   9ê°œ....

    const{body} = document; // êµ¬ì¡°ë¶„í•´ í• ë‹¹ -> body ìƒìˆ˜ì—ëŠ” body íƒœê·¸ ì—˜ë¦¬ë¨¼íŠ¸ ê°ì²´ê°€ í• ë‹¹ëœë‹¤

    const rows = [];

    const $table = document.createElement('table'); // <table> </table>
    const $result = document.createElement('div'); //  <div> </div>

    let turn = 'â­•'// 'O' ë˜ëŠ” 'X'




    const checkWinner = (target)=>{
    let rowIdx;
    let columnIdx;

    // /* rows_Value: rowsì˜  í•˜ë‚˜ì˜ ìš”ì†Œ ê°’ , rows_index: rowsì˜ ì¸ë±ìŠ¤  */
    // rows.forEach(( rows_Value , rows_index )=>{
      
    //   /* columns_Value: rowsì˜  í•˜ë‚˜ì˜ ìš”ì†Œ ê°’ , columns_index: rowsì˜ ì¸ë±ìŠ¤  */
    //   rows_Value.forEach(( columns_Value , columns_index ) => {
    //     if (columns_Value == target) {
    //       rowIdx = rows_index;
    //       coumnIdx = coumns_index;
    //       }
    //     });
    //   });
    // };

    rowIdx = target.parentNode.rowIndex;    
    columnIdx = target.cellIndex;

    console.log(target.parentNode);

    console.log(target.parentNode.children);


    let hasWinner = false;
    if(rows[rowIdx][0].textContent===turn &&
       rows[rowIdx][1].textContent===turn &&
       rows[rowIdx][2].textContent===turn){
        hasWinner = true;
    }

    if(rows[0][columnIdx].textContent===turn &&
       rows[1][columnIdx].textContent===turn &&
       rows[2][columnIdx].textContent===turn){
        hasWinner = true;
    }

    if(rows[0][0].textContent===turn &&
       rows[1][1].textContent===turn &&
       rows[2][2].textContent===turn){
        hasWinner = true;
    }

    if(rows[0][2].textContent===turn &&
       rows[1][1].textContent===turn &&
       rows[2][0].textContent===turn){
        hasWinner = true;
    }
    return hasWinner;
  };







    /* ğŸŸ¢ì½œë°±í•¨ìˆ˜ */
    const cEventListenerFunc = (event) =>{ 
      // event.prevemtDefault();
      if (event.target.textContent !=='') {
        console.log('ë¹ˆì¹¸ì´ ì•„ë‹˜');
        return;
      }  

      console.log('ë¹ˆì¹¸');
      event.target.textContent = turn; 

      const hasWinner = checkWinner(event.target);
      if(hasWinner){
        $result.textContent = `${turn}ë‹˜ì´ ìŠ¹ë¦¬í•¨!!!`;
        $table.removeEventListener('click',cEventListenerFunc);
        return;
      }
      turn = turn === 'â­•' ? 'âŒ' : 'â­•';  // 
      
    };


    /* â­â­â­â­â­â­â­ì‹œí—˜â­â­â­â­â­â­â­ */

    /* í–‰ */
    for ( let i = 1; i <= 3; i++ ) {
      // <tr></tr>
      const $tr = document.createElement('tr'); // 1ë²ˆ ì‹¤í–‰ì´ ë˜ë‹ˆ ë°˜ë³µë¬¸ì•ˆì— ë„£ê³  ê³„ì† ìƒì„±ë˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.
      const columns = [];

      /* ì—´ */
      for ( let j = 1; j <= 3; j++ ) {
        // <td></td>
        const $td = document.createElement('td'); // 1ë²ˆ ì‹¤í–‰ì´ ë˜ë‹ˆ ë°˜ë³µë¬¸ì•ˆì— ë„£ê³  ê³„ì† ìƒì„±ë˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.

        columns.push($td);
        // console.log(columns);

        //$tr.addEventListener('click',cEventListenerFunc);


        $tr.appendChild($td);
        // j:1 <tr><td></td></tr> j:2 <tr><td></td><td></td></tr> 
        // j:3 <tr><td></td><td></td><td></td></tr> 
    }

      rows.push(columns);
      // console.log(rows);
      $table.appendChild($tr);
      $table.addEventListener('click',cEventListenerFunc);

    }

    /* IMPORTANT: table bodyì— ì§‘ì–´ ë„£ê¸°  */
    body.appendChild($table);






  </script>
<!-- -----------------------------------------------------<FIXME:script>----------------------------------------------------- -->
  
</body>
</html>